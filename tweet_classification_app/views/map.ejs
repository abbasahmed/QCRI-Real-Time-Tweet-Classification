  <!DOCTYPE html>

  <html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
    <head profile="http://gmpg.org/xfn/11">
      <title>Tweet Classification</title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1">
     
<!-- My stylesheer -->
<link rel="stylesheet" href="/style.css" type="text/css">
     <!-- Markers -->
      <link rel="stylesheet" type="text/css" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
      <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js'></script>
      <script type='text/javascript' src='http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js'></script>
      <script type="text/javascript" src="/js/dependencies/sails.io.js"></script>
      <!-- Enf of Markers -->
    </head>
    <body>
          <div id="myNav" class="overlay">
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    <%console.log(respose[respose.length-1])%>
    <%if (sails.config.myconf.collectioncode == "170826213907_hurricane_harvey_2017") {%>
    <%sails.config.myconf.image = "/harveykey.png";%>
    <% }%>
    <%if (sails.config.myconf.collectioncode == "3345134690_Queensland_flood_2013") {%>
    <%sails.config.myconf.image = "/queenslandkey.png";%>
    <% }%>
   <center><button onclick="if (this.value == 'Start') return Action(this);" type="buttons" value="Start" style=" margin-top: 10px; position: absolute; left: 10%; top: 40; width: 65px;" id="allbus" class="btn btn-success"> Start
  </button><img src='<%=sails.config.myconf.image %>'style="margin-top: 10px; position: absolute; left: 36%; top: 40; width: 140px;"></center>
  <br>
  <br>
  <br>
  <br>
  <br>
  <div id="hello">
  <button class="accordion"><%=sails.config.myconf.filter1 %></button>
  <div class="overlay-content"   align="left" id="severitymaster"></div>
  <div class="slidecontainer">
 <input type="range" min="0" max="1" step="0.0001" value="0" class="slider" id="myRange">
 <p class="paralign"> <span id="demon" class="smallbutton"></span></p>
 </div>
  </div>

  <div id="hello2">
  <button class="accordion"><%=sails.config.myconf.filter2 %></button>
  <div class="overlay-content"  align="left"  id="aidrmaster"></div>
  <div class="slidecontainer">
 <input type="range" min="0" max="1" step="0.0001" value="0" class="slider" id="myRange1">
 <p class="paralign"> <span id="demon1" class="smallbutton"></span></p>
 </div>
  </div>

  <div id="hello3">
  <button class="accordion"><%=sails.config.myconf.filter3 %></button>
  <div class="overlay-content"  align="left"  id="sentimentmaster"></div>
  <div class="slidecontainer">
 <input type="range" min="0" max="1" step="0.0001" value="0" class="slider" id="myRange2">
 <p class="paralign"> <span id="demon2" class="smallbutton"></span></p>
 </div>
  </div>
  <div id="hello4">
  <button class="accordion"><%=sails.config.myconf.filter4 %></button>
  <div class="overlay-content"  align="left"  id="imagemaster"></div>
  </div>

</div>   
<script>
var slider = document.getElementById("myRange");
var output = document.getElementById("demon");
output.innerHTML = slider.value;
slider.oninput = function() {
 output.innerHTML = this.value;
}
slider.onmouseup=function(){
 task(event);
}
var slider1 = document.getElementById("myRange1");
var output1 = document.getElementById("demon1");
output1.innerHTML = slider1.value;
slider1.oninput = function() {
 output1.innerHTML = this.value;
}
slider1.onmouseup=function(){
 task(event);
}
var slider2 = document.getElementById("myRange2");
var output2 = document.getElementById("demon2");
output2.innerHTML = slider2.value;
slider2.oninput = function() {
 output2.innerHTML = this.value;
}
slider2.onmouseup=function(){
 task(event);
}
</script>
<script>
var acc = document.getElementsByClassName("accordion");
var i;

for (i = 0; i < acc.length; i++) {
    acc[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var panel = this.nextElementSibling;
        if (panel.style.display === "block") {
            panel.style.display = "none";
        } else {
            panel.style.display = "block";
        }
    });
}
</script> 
<script>
    var windoww= "";

        function Action(el) {

            my_window = window.open('http://localhost:1337/sim/add','','width=,height=,resizable=no');
            windoww=my_window;  
            my_window.focus();

            if ( el.value === "Start" )
        el.value = "Stop";
    else
        el.value = "Start";

        }
    </script>

        
            <div id="map">
              
 <br>
    <br>
    <br>
    <br>

    <div class="btn-group" style="z-index: 401"> <!-- Use 401 to be between map and controls -->
    <!-- <button type="buttons" value ="Start" id="allbus" class="btn btn-success" onclick="Action()"></button> -->

  <span  id="SpanHeader" class="CourseHeader"  onclick="openNav()">&#9776; &nbsp </span> 
  <img src="/click.png" id="SpanHeader2" class="CourseHeader2" > 
</div>

       

            </div>

          </td>
      </tr>
      <table>
  <div id="dep" hidden="true"><%=respose[0]%></div>
  <div id="dope" hidden="true"></div>

  <script>
    String.prototype.replaceAt=function(index, replacement) {
    return this.substr(0, index) + replacement+ this.slice(index+1)
}
function removeunwanted(age) {
    age=age.charAt(0).toUpperCase()+age.slice(1);
    for(i=0;i<age.length;i++){
        if(age.charAt(i)=='_'){
             age=age.replaceAt(i, " ")
             if(!(age.substring(i+1,i+4)=="and" || age.substring(i+1,i+3)=="or")){
                 age=age.substring(0,i+1)+age.charAt(i+1).toUpperCase()+age.slice(i+2);
                 
             }
        }
    }
    return age;
}
function openNav() {
$("#SpanHeader").toggleClass("Black");
$("#SpanHeader2").toggleClass("Black");
    document.getElementById("myNav").style.width = "30%";

}

function closeNav() {
  $("#SpanHeader").removeClass("Black");
  $("#SpanHeader2").toggleClass("Black");
    document.getElementById("myNav").style.width = "0%";
}
</script>

  <script> 
     console.log(document.getElementById("dep").innerHTML);
    var mbAttr = 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
      '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
      'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
    mbUrl = 'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw';
  var streets  = L.tileLayer(mbUrl, {id: 'mapbox.streets',   attribution: mbAttr}),
    satellite  = L.tileLayer(mbUrl, {id: 'mapbox.streets-satellite',   attribution: mbAttr});
 var markerGroup = L.layerGroup();
  var map = L.map( 'map', {
    center: [20.0, 5.0],
    minZoom: 2,
    zoom: 2,
    layers: [streets, markerGroup]
  });
  L.tileLayer( 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',
    subdomains: ['a', 'b', 'c']
  }).addTo( map );
  var baseLayers = {
    "Streets": streets,
    "Satellite": satellite
  };
  var overlays = {
    "Markers": markerGroup
  };
   L.control.layers(baseLayers, overlays).addTo(map);
  // Green color
  var myIcon = L.icon({
    iconUrl: '/images/pin24.png',
    iconRetinaUrl:'/images/pin48.png',
    iconSize: [34, 29],
    iconAnchor: [9, 21],
    popupAnchor: [0, -14]
  });
  // Yellow color
  var myIcon2 = L.icon({
    iconUrl: '/images/pin24(2).png',
    iconRetinaUrl:'/images/pin48(2).png',
    iconSize: [34, 29],
    iconAnchor: [9, 21],
    popupAnchor: [0, -14]
  });
  // Red color
  var myIcon3 = L.icon({
    iconUrl: '/images/pin24(3).png',
    iconRetinaUrl:'/images/pin48(3).png',
    iconSize: [34, 29],
    iconAnchor: [9, 21],
    popupAnchor: [0, -14]
  });
var outer=io.sails.connect();
var inner=io.sails.connect();
function get1(qu,flag){
  
outer.get(qu, function (resData, jwres){
  markerGroup.clearLayers();
  map.addLayer(markerGroup);
  console.log(resData.sim.length);
  console.log(qu);
  for(let j=0; j<resData.sim.length; j++){ 

  let lati= resData.sim[j].latitude;
  let long= resData.sim[j].longitude; 
  let text1= resData.sim[j].tweet_text; 
  let img= resData.sim[j].image_physical_location; 
  let aidr= resData.sim[j].aidr_class_label; 
  let sentiment= resData.sim[j].sentiment; 
  let severity= resData.sim[j].image_damage_class; 
function linkify(text) {
 var urlRegex =/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
 return text.replace(urlRegex, function(url) {
     return '<a href="' + url + '" target="' + '_blank' + '"">' + url + '</a>'
 });
}
var a=linkify(text1);
var senti='';
var aid='';
aid=removeunwanted(aidr);
if(severity== ''){
severity="Unkown";
}
if(severity== 'None'){
severity="Zero";
}
var popup = L.popup();
function onMapClick() {
    popup
        .setLatLng([long, lati])
        .setContent('<p>' + a + '</p>' + "<a target='" + '_blank' + "' href='" +  img  + "'><img class='size'  src='" + img  + "'/></a>" + '<p>' +'<b>' + "<%= sails.config.myconf.displayaidr %>" +'</b>'+ aid+ '</p>'+ '<p>' +'<b>'+ "<%= sails.config.myconf.displaysentiment %>" +'</b>'+  sentiment  + '</p>'+'<p>' +'<b>'+ "<%= sails.config.myconf.displayseverity %>" +'</b>'+  severity  + '</p>')
        .addTo(map);
}
function onMapClick2() {
    popup
        .setLatLng([long, lati])
        .setContent('<p>' + a + '</p>'  + '<p>' +'<b>'+ "<%= sails.config.myconf.displayaidr %>" +'</b>'+ aid+ '</p>'+ '<p>' +'<b>'+ "<%= sails.config.myconf.displaysentiment %>" +'</b>'+  sentiment  + '</p>'+'<p>' +'<b>'+ "<%= sails.config.myconf.displayseverity %>" +'</b>'+  severity  + '</p>')
        .addTo(map);
}
  if (severity== ('None')){
     if(img==''){
  little = new L.marker([long,lati], {icon: myIcon} ).addTo(markerGroup); 
  little.on('click', onMapClick2);   
   
     }
     else{
  little1 = new L.marker([long,lati], {icon: myIcon} ).addTo(markerGroup); 
  little1.on('click', onMapClick);   
 
}
   }
   else if (severity=='Mild') {
      if(img==''){
  little2 = new L.marker([long,lati], {icon: myIcon2} ).addTo(markerGroup); 
  little2.on('click', onMapClick2);   
   
     }
     else{
  little3 = new L.marker([long,lati], {icon: myIcon2} ).addTo(markerGroup); 
  little3.on('click', onMapClick);   
 
}
}
   else if (severity=='Severe') {
     if( img==''){
  little4 = new L.marker([long,lati], {icon: myIcon3} ).addTo(markerGroup); 
  little4.on('click', onMapClick2);   
     }
     else{
       
      little5= new L.marker([long,lati], {icon: myIcon3} ).addTo(markerGroup); 
    little5.on('click', onMapClick); 
}
} 
else if (severity=='Minor') {
     if( img==''){
  little41 = new L.marker([long,lati], {icon: myIcon} ).addTo(markerGroup); 
  little41.on('click', onMapClick2);   
     }
     else{
       
      little51= new L.marker([long,lati], {icon: myIcon} ).addTo(markerGroup); 
    little51.on('click', onMapClick); 
}
}
else if (severity=='Moderate') {
     if( img==''){
  little42 = new L.marker([long,lati], {icon: myIcon2} ).addTo(markerGroup); 
  little42.on('click', onMapClick2);   
     }
     else{
       
      little52= new L.marker([long,lati], {icon: myIcon2} ).addTo(markerGroup); 
    little52.on('click', onMapClick); 
}
}
else if (severity=='Major') {
     if( img==''){
  little43 = new L.marker([long,lati], {icon: myIcon3} ).addTo(markerGroup); 
  little43.on('click', onMapClick2);   
     }
     else{
       
      little53= new L.marker([long,lati], {icon: myIcon3} ).addTo(markerGroup); 
    little53.on('click', onMapClick); 
}
}
else {
   if(img==''){
  little6 = new L.marker([long,lati], {icon: myIcon} ).addTo(markerGroup); 
  little6.on('click', onMapClick2);   
   
     }
     else{
  little7 = new L.marker([long,lati], {icon: myIcon} ).addTo(markerGroup); 
  little7.on('click', onMapClick);   
 
}
}      
 }
if(resData.sim.length!=0){
let createtime1=resData.sim[0].createtime;
let vep=document.getElementById("dope").innerText;
var n = vep.indexOf("q8");
console.log(vep)
console.log(vep.replace(vep.substring(n+3), createtime1));
var res = vep.replace(vep.substring(n+3), createtime1);
console.log(res);
document.getElementById("dope").innerText = res;
console.log(res);
}
if(flag==0){
 setInterval(

function(){
  inner.get(document.getElementById("dope").innerText, function (resData1, jwres){
  console.log("checkkkk" + resData1.sim);
   console.log((document.getElementById("dep").innerText))
            for(let i=0;i<resData1.sim.length; i++){
            let latii= resData1.sim[i].latitude
            let longi= resData1.sim[i].longitude 
            let text1i= resData1.sim[i].tweet_text 
            let imgi= resData1.sim[i].image_physical_location 
           let aidri= resData1.sim[i].aidr_class_label 
            let sentimenti= resData1.sim[i].sentiment 
            let severityi= resData1.sim[i].image_damage_class
            let txt1= text1i;
            function linkify1(text) {
             var urlRegex =/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;
             return text.replace(urlRegex, function(url) {
                 return '<a href="' + url + '" target="' + '_blank' + '"">' + url + '</a>';
             });
          }
            let ai=linkify1(txt1);
            let sentii='';
let aidi='';
aidi=removeunwanted(aidri);
var popup1 = L.popup();
function onMapClick1() {
    popup1
        .setLatLng([longi, latii])
        .setContent('<p>' + ai + '</p>' + "<a target='" + '_blank' + "' href='" +  imgi  + "'><img class='size'  src='" + imgi  + "'/></a>" + '<p>' +'<b>'+ "<%= sails.config.myconf.displayaidr %>" +'</b>'+ aidi+ '</p>'+ '<p>' +'<b>'+ "<%= sails.config.myconf.displaysentiment %>" +'</b>'+  sentimenti  + '</p>'+'<p>' +'<b>'+ "<%= sails.config.myconf.displayseverity %>" +'</b>'+  severityi  + '</p>')
        .addTo(map);
}
function onMapClick21() {
    popup1
        .setLatLng([longi, latii])
        .setContent('<p>' + ai + '</p>'  + '<p>' +'<b>'+  "<%= sails.config.myconf.displayaidr %>" +'</b>' + aidi+ '</p>'+ '<p>' +'<b>'+ "<%= sails.config.myconf.displaysentiment %>" +'</b>'+  sentimenti  + '</p>'+'<p>' +'<b>'+ "<%= sails.config.myconf.displayseverity %>" +'</b>'+  severityi  + '</p>')
        .addTo(map);
}
if (severityi== ('None')){
     if(imgi==''){
  littlei = new L.marker([longi,latii], {icon: myIcon} ).addTo(markerGroup); 
  littlei.on('click', onMapClick21);   
   
     }
     else{
  little1i = new L.marker([longi,latii], {icon: myIcon} ).addTo(markerGroup); 
  little1i.on('click', onMapClick1);   
 
}
   }
   else if (severityi=='Mild') {
      if(imgi==''){
  little2i = new L.marker([longi,latii], {icon: myIcon2} ).addTo(markerGroup); 
  little2i.on('click', onMapClick21);   
   
     }
     else{
  little3i = new L.marker([longi,latii], {icon: myIcon2} ).addTo(markerGroup); 
  little3i.on('click', onMapClick1);   
 
}
}
   else if (severityi=='Severe') {
     if( imgi==''){
  little4i = new L.marker([longi,latii], {icon: myIcon3} ).addTo(markerGroup); 
  little4i.on('click', onMapClick21);   
     }
     else{
       
      little5i= new L.marker([longi,latii], {icon: myIcon3} ).addTo(markerGroup); 
    little5i.on('click', onMapClick1); 
}
} 
else if (severity=='Minor') {
     if( img==''){
  little41 = new L.marker([long,lati], {icon: myIcon} ).addTo(markerGroup); 
  little41.on('click', onMapClick2);   
     }
     else{
       
      little51= new L.marker([long,lati], {icon: myIcon} ).addTo(markerGroup); 
    little51.on('click', onMapClick); 
}
}
else if (severity=='Moderate') {
     if( img==''){
  little42 = new L.marker([long,lati], {icon: myIcon2} ).addTo(markerGroup); 
  little42.on('click', onMapClick2);   
     }
     else{
       
      little52= new L.marker([long,lati], {icon: myIcon2} ).addTo(markerGroup); 
    little52.on('click', onMapClick); 
}
}
else if (severity=='Major') {
     if( img==''){
  little43 = new L.marker([long,lati], {icon: myIcon3} ).addTo(markerGroup); 
  little43.on('click', onMapClick2);   
     }
     else{
       
      little53= new L.marker([long,lati], {icon: myIcon3} ).addTo(markerGroup); 
    little53.on('click', onMapClick); 
}
}
else {
   if(imgi==''){
  little6i = new L.marker([longi,latii], {icon: myIcon} ).addTo(markerGroup); 
  little6i.on('click', onMapClick21);   
   
     }
     else{
  little7i = new L.marker([longi,latii], {icon: myIcon} ).addTo(markerGroup); 
  little7i.on('click', onMapClick1);   
 
}
}           
}
if(resData1.sim.length!=0){
let createtime2=resData1.sim[0].createtime;
let vep1=document.getElementById("dope").innerText;
var n1 = vep1.indexOf("q8");
var res1 = vep1.replace(vep1.substring(n1+3), createtime2);
document.getElementById("dope").innerText = res1;
console.log(res1);
}
  });
},5000);
}
    });

}
 
  </script>
  <script>
    function dyrender(s1,s2,s3){
          var num = document.getElementById(s1);
          var td = document.createElement('td');
          var tr=document.createElement('tr');
          var h4=document.createElement('h4');
          var div=document.createElement('div');
          div.id=s2;
          var txt=document.createTextNode(s3);
          h4.appendChild(txt);
          td.appendChild(h4);
          tr.appendChild(td);
          num.appendChild(tr);
          td=document.createElement('td');
          tr=document.createElement('tr');
          td.appendChild(div);
          tr.appendChild(td);
          num.appendChild(tr);
          td=document.createElement('td');
          tr=document.createElement('tr');
          td.appendChild(document.createTextNode( '\u00A0' ));
          tr.appendChild(td);
          num.appendChild(tr);
    }
  </script>
  <% if(respose[respose.length-1]!=0){%>
  <div>

        <% if(respose[1]!=0){%>
         <div id="something1" hidden='true'>
          <%= respose[1] %>
        </div>
         
          <script>
          dyrender('severitymaster','severity', '');
          console.log("number of Severity " + document.getElementById("something1").innerText);
        </script>
        <% for(var i=2; i<(respose[1])+2; i++){ %>
          <script>
            var slc1=document.getElementById('severity');
            var ele='<%=respose[i]%>';
            var checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.align= "left";
            checkbox.className ="severity";
            checkbox.value =ele;
            slc1.appendChild(checkbox);
            var label = document.createElement('label')
            label.htmlFor = ele;
            label.align="left";
            label.setAttribute( 'style', 'color:#000000;');
            var te=ele;
             if(ele=="null" && document.getElementById("something1").innerText == 1){
                      te="";
                       checkbox.style.display = 'none'; 
                       var x= document.getElementById("hello");
                       x.innerHTML = "";
                }

            if(ele=='null'){
                te='Unknown';
            }
            else if(ele=='None'){
              te='Zero';
            }
            else if(ele=='Severe'){
              te='High';
            }
            label.appendChild(document.createTextNode(te+' '+'Severity'));
            slc1.appendChild(label);
            slc1.appendChild(document.createElement("br"));   
            checkbox.setAttribute("onClick","task(event);");
          </script>
        <%}%>
        <%}%>
        <% if(respose[i]!=0){%>
        <div id="something2" hidden='true'>
          <%= respose[i] %>
        </div>
            <script >
                dyrender('aidrmaster','aidr', '');
                console.log("number of AIDR label " + document.getElementById("something2").innerText);
        </script>
      
         <% for(var j=i+1; j<(respose[i])+i+1; j++){ %>
              <script>

                var slc2=document.getElementById('aidr');
                var ele='<%=respose[j]%>';
                var check = ele.charAt(0).toUpperCase() + ele.slice(1);
                console.log(check);
                var checkbox = document.createElement("input");
                checkbox.type = "checkbox";
                checkbox.className ="aidr";
                checkbox.value =ele;
                slc2.appendChild(checkbox);
                var label = document.createElement('label')
                label.setAttribute( 'style', 'color:#000000;');
                label.htmlFor = ele;
                 if(ele=="null" && document.getElementById("something2").innerText == 1){
                       checkbox.style.display = 'none'; 
                       var x= document.getElementById("hello2");
                       x.innerHTML = "";
                }
                label.appendChild(document.createTextNode(check.replace(/_/g,' ')));
                slc2.appendChild(label);
                slc2.appendChild(document.createElement("br"));   
                checkbox.setAttribute("onClick","task(event);");
              </script>
         <%}%>
         <%}%>
         <% if(respose[j]!=0){%>
         <div id="something3" hidden='true'>
          <%= respose[j] %>
        </div>

         <script>
           dyrender('sentimentmaster','sentiment','');
           console.log("number of Sentiment " + document.getElementById("something3").innerText);
        </script>
         <% for(var k=j+1; k<(respose[j])+j+1; k++){ %>
              <script>
                var slc3=document.getElementById('sentiment');
                var ele='<%=respose[k]%>';
                var checkbox = document.createElement("input");
                checkbox.type = "checkbox";
                checkbox.className ="sentiment";
                checkbox.value =ele;
                slc3.appendChild(checkbox);
                var label = document.createElement('label')
                label.htmlFor = ele;
                label.setAttribute( 'style', 'color:#000000;');
                te=ele;
                if(ele=="null" && document.getElementById("something3").innerText == 1){
                      te="";
                       checkbox.style.display = 'none'; 
                       var x= document.getElementById("hello3");
                       x.innerHTML = "";
                }
                label.appendChild(document.createTextNode(te));
                slc3.appendChild(label);
                slc3.appendChild(document.createElement("br"));   
                checkbox.setAttribute("onClick","task(event);");
              </script>
         <%}%>
         <%}%>

         
         <% if(respose[k]!=0){ %>
         <div id="something4" hidden='true'>
          <%= respose[k] %>
        </div>
          
  <script>
         dyrender('imagemaster','image','');
         console.log("number of Image " + document.getElementById("something4").innerText);
        </script>
         <% for(var l1=k+1; l1<(respose[k])+k+1; l1++){ %>
              <script>
                var slc4=document.getElementById("image");
                var ele='<%=respose[l1]%>';
                var check = ele.charAt(0).toUpperCase() + ele.slice(1);
                var checkbox = document.createElement("input");
                checkbox.type = "checkbox";
                checkbox.className ="image";
                checkbox.value =ele;
                slc4.appendChild(checkbox);
                var label = document.createElement('label')
                label.htmlFor = ele;
                label.setAttribute( 'style', 'color:#000000;');
                label.appendChild(document.createTextNode(check));
                slc4.appendChild(label);
                slc4.appendChild(document.createElement("br"));   
                checkbox.setAttribute("onClick","task(event);");
              </script>
         <%}%>
        <% }%>
          <%}%>
         <script>
             function task(e){
              console
        var checks = document.getElementsByClassName('severity');
        console.log(checks);
                  var str = '';
                   if ( '<%=sails.config.myconf.displayseverity %>'== "Severity: "){
                  for ( i = 0; i < document.getElementById("something1").innerText; i++) {
                       
                      if ( checks[i].checked === true) {
                          str += checks[i].value + " ";
                      }
                       
                  }
                }
                  if(str!=''){
                    str=str.trim();
                  str= str.split(' ');
                  }
                  var checks2 = document.getElementsByClassName('aidr');
                  console.log(checks2);
                  var str2 = '';
                    if ( '<%=sails.config.myconf.displayaidr %>'== "Humanitarian Category: "){
                  for ( j = 0; j < document.getElementById("something2").innerText; j++) {

                       console.log(checks2[j].checked);
                       
                      if ( checks2[j].checked === true ) {
                          str2 += checks2[j].value + " ";
                      }
                       
                  }
                }
                  if(str2!=''){
                  str2=str2.trim();
                  str2= str2.split(' ');
                  }
                  var checks3 = document.getElementsByClassName('sentiment');
                  var str3 = '';
                    if ( '<%=sails.config.myconf.displaysentiment %>'== "Sentiment: "){
                  for ( k = 0; k < document.getElementById("something3").innerText; k++) {
                       
                      if ( checks3[k].checked === true ) {
                          str3 += checks3[k].value + " ";
                      }
                  }
                }
                  if(str3!=''){
                  str3=str3.trim();
                  str3= str3.split(' ');
                  }
                  query4='';
                  var checks4 = document.getElementsByClassName('image');
                  if(checks4[0].checked==true && checks4[1].checked==false ){
                    query4="no";
                  }
                  else if(checks4[1].checked==true && checks4[0].checked==false){
                    query4="yes";
                  }
                  else if(checks4[1].checked==true && checks4[0].checked==true){
                    query4="both1";
                  }
                  else if(checks4[1].checked==false && checks4[0].checked==false){
                    query4="both2";
                  }
                  var idc={'null':false,'None':false,'Mild':false,'Severe':false};
                  query='';
                  query1='';
                  query2='';
                  query3='';
                  for ( l = 0; l < str.length; l++) {
                      if(str[l]=="null"){
                        idc[str[l]]=true;
                    query += '{image_damage_class:'+ '\"'+'\"'+'}'; 
                    query1+= '{image_damage_class:'+ '\"'+'\"'+'}'; 
                      }
                      else{
                      idc[str[l]]=true;
                    query += '{image_damage_class:'+ '\"'+str[l] + '\"'+'}';  
                    query1 += '{image_damage_class:'+ '\"'+str[l] + '\"'+'}'; 
                }
            }
            for ( m = 0; m < str2.length; m++) {
                    query += '{aidr_class_label:' + '\"'+str2[m] + '\"'+'}';
                    query2 += '{aidr_class_label:' + '\"'+str2[m] + '\"'+'}';
                }
                var sen={'Positive':false,'Negative':false,'Neutral':false};
                  for ( n = 0; n < str3.length; n++) {
                    query += '{sentiment:'+'\"'+ str3[n] + '\"'+'}';
                     query3 += '{sentiment:'+'\"'+ str3[n] + '\"'+'}';   
                }


                var qu='/tweets/filteror?q1='+query1+'&q2='+query2+'&q3='+query3+'&q4='+query4+'&q5='+0+'&q7='+0+'&q9='+document.getElementById("dep").innerHTML+'&q10='+document.getElementById("demon").innerHTML+'&q11='+document.getElementById("demon1").innerHTML+'&q12='+document.getElementById("demon2").innerHTML+'&q8='+'xyz';
                console.log(document.getElementById("dep"))
                document.getElementById("dope").innerText = '/tweets/filteror?q1='+query1+'&q2='+query2+'&q3='+query3+'&q4='+query4+'&q5='+1+'&q7='+1+'&q9='+document.getElementById("dep").innerHTML+'&q10='+document.getElementById("demon").innerHTML+'&q11='+document.getElementById("demon1").innerHTML+'&q12='+document.getElementById("demon2").innerHTML+'&q8='+'xyz';
                get1(qu,0);
    }    
         </script>
         <script>
          window.onload = function() {
              console.log(document.getElementById("demon2"));
               get1('/tweets/filteror?q1='+''+'&q2='+''+'&q3='+''+'&q4='+''+'&q5='+0+'&q7='+0+'&q9='+document.getElementById("dep").innerHTML+'&q10='+document.getElementById("demon").innerHTML+'&q11='+document.getElementById("demon1").innerHTML+'&q12='+document.getElementById("demon2").innerHTML+'&q8='+'xyz',1);
             }
        </script>
        
</div>
    </body>
  </html>
